<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Section 4 Problems when using dplyr::full_join | Untitled</title>
  <meta name="description" content="Some R observations/tricks ." />
  <meta name="generator" content="bookdown 0.26 and GitBook 2.6.7" />

  <meta property="og:title" content="Section 4 Problems when using dplyr::full_join | Untitled" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="Some R observations/tricks ." />
  <meta name="github-repo" content="rstudio/bookdown-demo" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Section 4 Problems when using dplyr::full_join | Untitled" />
  
  <meta name="twitter:description" content="Some R observations/tricks ." />
  

<meta name="author" content="Tran Le" />


<meta name="date" content="2022-10-10" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="r-resources-from-absolute-beginners-to-more-advance.html"/>
<link rel="next" href="load-and-write-to-an-excel-sheet.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
<link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding-0.23/datatables.js"></script>
<link href="libs/dt-core-1.11.3/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.11.3/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.11.3/js/jquery.dataTables.min.js"></script>
<link href="libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet" />
<script src="libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./"> Tran Le - Some random R tricks</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a></li>
<li class="chapter" data-level="2" data-path="github-cheatsheet.html"><a href="github-cheatsheet.html"><i class="fa fa-check"></i><b>2</b> Github-Cheatsheet</a>
<ul>
<li class="chapter" data-level="2.1" data-path="github-cheatsheet.html"><a href="github-cheatsheet.html#introduction-1"><i class="fa fa-check"></i><b>2.1</b> Introduction</a></li>
<li class="chapter" data-level="2.2" data-path="github-cheatsheet.html"><a href="github-cheatsheet.html#connecting-an-existing-rstudio-project-to-github."><i class="fa fa-check"></i><b>2.2</b> Connecting an existing Rstudio project to Github.</a></li>
<li class="chapter" data-level="2.3" data-path="github-cheatsheet.html"><a href="github-cheatsheet.html#integrate-rstudio-with-an-existing-project-on-github"><i class="fa fa-check"></i><b>2.3</b> Integrate Rstudio with an existing project on Github</a></li>
<li class="chapter" data-level="2.4" data-path="github-cheatsheet.html"><a href="github-cheatsheet.html#how-to-post-your-bookdown-file-to-github"><i class="fa fa-check"></i><b>2.4</b> How to post your Bookdown file to Github</a></li>
<li class="chapter" data-level="2.5" data-path="github-cheatsheet.html"><a href="github-cheatsheet.html#some-most-common-git-commands."><i class="fa fa-check"></i><b>2.5</b> Some most common git commands.</a></li>
<li class="chapter" data-level="2.6" data-path="github-cheatsheet.html"><a href="github-cheatsheet.html#references"><i class="fa fa-check"></i><b>2.6</b> References</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="r-resources-from-absolute-beginners-to-more-advance.html"><a href="r-resources-from-absolute-beginners-to-more-advance.html"><i class="fa fa-check"></i><b>3</b> R resources from absolute beginners to more advance</a>
<ul>
<li class="chapter" data-level="3.1" data-path="r-resources-from-absolute-beginners-to-more-advance.html"><a href="r-resources-from-absolute-beginners-to-more-advance.html#introduction-2"><i class="fa fa-check"></i><b>3.1</b> Introduction</a></li>
<li class="chapter" data-level="3.2" data-path="r-resources-from-absolute-beginners-to-more-advance.html"><a href="r-resources-from-absolute-beginners-to-more-advance.html#for-absolute-beginners."><i class="fa fa-check"></i><b>3.2</b> For absolute beginners.</a></li>
<li class="chapter" data-level="3.3" data-path="r-resources-from-absolute-beginners-to-more-advance.html"><a href="r-resources-from-absolute-beginners-to-more-advance.html#r-graphs-galleries"><i class="fa fa-check"></i><b>3.3</b> R graphs galleries</a></li>
<li class="chapter" data-level="3.4" data-path="r-resources-from-absolute-beginners-to-more-advance.html"><a href="r-resources-from-absolute-beginners-to-more-advance.html#some-r-excellent-books"><i class="fa fa-check"></i><b>3.4</b> Some R excellent books</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="problems-when-using-dplyrfull_join.html"><a href="problems-when-using-dplyrfull_join.html"><i class="fa fa-check"></i><b>4</b> Problems when using dplyr::full_join</a>
<ul>
<li class="chapter" data-level="4.1" data-path="problems-when-using-dplyrfull_join.html"><a href="problems-when-using-dplyrfull_join.html#introduction-3"><i class="fa fa-check"></i><b>4.1</b> Introduction</a></li>
<li class="chapter" data-level="4.2" data-path="problems-when-using-dplyrfull_join.html"><a href="problems-when-using-dplyrfull_join.html#using-dplyrfull_join"><i class="fa fa-check"></i><b>4.2</b> Using dplyr::full_join</a></li>
<li class="chapter" data-level="4.3" data-path="problems-when-using-dplyrfull_join.html"><a href="problems-when-using-dplyrfull_join.html#using-powerjoinpower_full_join"><i class="fa fa-check"></i><b>4.3</b> Using powerjoin::power_full_join</a></li>
<li class="chapter" data-level="4.4" data-path="problems-when-using-dplyrfull_join.html"><a href="problems-when-using-dplyrfull_join.html#what-if-we-have-conflict-data-sets"><i class="fa fa-check"></i><b>4.4</b> What if we have conflict data sets</a></li>
<li class="chapter" data-level="4.5" data-path="problems-when-using-dplyrfull_join.html"><a href="problems-when-using-dplyrfull_join.html#references-1"><i class="fa fa-check"></i><b>4.5</b> References</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="load-and-write-to-an-excel-sheet.html"><a href="load-and-write-to-an-excel-sheet.html"><i class="fa fa-check"></i><b>5</b> Load and write to an excel sheet</a>
<ul>
<li class="chapter" data-level="5.1" data-path="load-and-write-to-an-excel-sheet.html"><a href="load-and-write-to-an-excel-sheet.html#introduction-4"><i class="fa fa-check"></i><b>5.1</b> Introduction</a></li>
<li class="chapter" data-level="5.2" data-path="load-and-write-to-an-excel-sheet.html"><a href="load-and-write-to-an-excel-sheet.html#code"><i class="fa fa-check"></i><b>5.2</b> Code</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="replace-values-by-nasa-specfic-value.html"><a href="replace-values-by-nasa-specfic-value.html"><i class="fa fa-check"></i><b>6</b> Replace Values by Nas/A specfic value</a>
<ul>
<li class="chapter" data-level="6.1" data-path="replace-values-by-nasa-specfic-value.html"><a href="replace-values-by-nasa-specfic-value.html#introduction-5"><i class="fa fa-check"></i><b>6.1</b> Introduction</a></li>
<li class="chapter" data-level="6.2" data-path="replace-values-by-nasa-specfic-value.html"><a href="replace-values-by-nasa-specfic-value.html#replace_with_na-replace-specific-values-at-in-specific-columns-by-nas."><i class="fa fa-check"></i><b>6.2</b> replace_with_na(): replace specific value(s) at in specific columns by NAs.</a></li>
<li class="chapter" data-level="6.3" data-path="replace-values-by-nasa-specfic-value.html"><a href="replace-values-by-nasa-specfic-value.html#replace_with_na_all-replaces-some-values-by-na-for-all-columns."><i class="fa fa-check"></i><b>6.3</b> replace_with_na_all() Replaces some values by NA for all columns.</a></li>
<li class="chapter" data-level="6.4" data-path="replace-values-by-nasa-specfic-value.html"><a href="replace-values-by-nasa-specfic-value.html#replace_with_na_at-replaces-some-chosen-values-in-a-chosen-set-of-columns-by-nas."><i class="fa fa-check"></i><b>6.4</b> replace_with_na_at(): replaces some chosen values in a chosen set of columns by NAs.</a></li>
<li class="chapter" data-level="6.5" data-path="replace-values-by-nasa-specfic-value.html"><a href="replace-values-by-nasa-specfic-value.html#replace_with_na_if-replaces-some-values-on-some-columns-with-conditions-is.numeric-is.character-by-na."><i class="fa fa-check"></i><b>6.5</b> replace_with_na_if(): Replaces some values on some columns with conditions (is.numeric, is.character) by NA.</a></li>
<li class="chapter" data-level="6.6" data-path="replace-values-by-nasa-specfic-value.html"><a href="replace-values-by-nasa-specfic-value.html#a-helpfull-observation-using-mutate_at-and-replace"><i class="fa fa-check"></i><b>6.6</b> A helpfull observation using mutate_at and replace</a></li>
<li class="chapter" data-level="6.7" data-path="replace-values-by-nasa-specfic-value.html"><a href="replace-values-by-nasa-specfic-value.html#references-2"><i class="fa fa-check"></i><b>6.7</b> References</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="find-group-of-highly-correlated-columns.html"><a href="find-group-of-highly-correlated-columns.html"><i class="fa fa-check"></i><b>7</b> Find group of highly correlated columns</a>
<ul>
<li class="chapter" data-level="7.1" data-path="find-group-of-highly-correlated-columns.html"><a href="find-group-of-highly-correlated-columns.html#introduction-6"><i class="fa fa-check"></i><b>7.1</b> Introduction</a></li>
<li class="chapter" data-level="7.2" data-path="find-group-of-highly-correlated-columns.html"><a href="find-group-of-highly-correlated-columns.html#data-set-and-the-code-to-get-the-result"><i class="fa fa-check"></i><b>7.2</b> Data set and the code to get the result</a></li>
<li class="chapter" data-level="7.3" data-path="find-group-of-highly-correlated-columns.html"><a href="find-group-of-highly-correlated-columns.html#explain-the-code-in-details"><i class="fa fa-check"></i><b>7.3</b> Explain the code in details</a></li>
<li class="chapter" data-level="7.4" data-path="find-group-of-highly-correlated-columns.html"><a href="find-group-of-highly-correlated-columns.html#deal-with-nominal-nominal-variables"><i class="fa fa-check"></i><b>7.4</b> Deal with nominal-nominal variables</a></li>
<li class="chapter" data-level="7.5" data-path="find-group-of-highly-correlated-columns.html"><a href="find-group-of-highly-correlated-columns.html#here-is-the-code-to-get-group-of-highly-correlated-columns"><i class="fa fa-check"></i><b>7.5</b> Here is the code to get group of highly correlated columns</a></li>
<li class="chapter" data-level="7.6" data-path="find-group-of-highly-correlated-columns.html"><a href="find-group-of-highly-correlated-columns.html#explain-the-steps-in-details"><i class="fa fa-check"></i><b>7.6</b> Explain the steps in details</a></li>
<li class="chapter" data-level="7.7" data-path="find-group-of-highly-correlated-columns.html"><a href="find-group-of-highly-correlated-columns.html#references-3"><i class="fa fa-check"></i><b>7.7</b> References</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="relabel-study-names-into-a-numeric-sequence.html"><a href="relabel-study-names-into-a-numeric-sequence.html"><i class="fa fa-check"></i><b>8</b> Relabel study names into a numeric sequence</a>
<ul>
<li class="chapter" data-level="8.1" data-path="relabel-study-names-into-a-numeric-sequence.html"><a href="relabel-study-names-into-a-numeric-sequence.html#introduction-7"><i class="fa fa-check"></i><b>8.1</b> Introduction</a></li>
<li class="chapter" data-level="8.2" data-path="relabel-study-names-into-a-numeric-sequence.html"><a href="relabel-study-names-into-a-numeric-sequence.html#create-data"><i class="fa fa-check"></i><b>8.2</b> Create data</a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="relabel-study-names-into-a-numeric-sequence.html"><a href="relabel-study-names-into-a-numeric-sequence.html#what-if-we-want-to-keep-the-order-of-study-names-as-they-were"><i class="fa fa-check"></i><b>8.2.1</b> What if we want to keep the order of Study names as they were</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="relabel-study-names-into-a-numeric-sequence.html"><a href="relabel-study-names-into-a-numeric-sequence.html#transform-an-arm-based-data-table-to-a-study-based-data-table"><i class="fa fa-check"></i><b>8.3</b> Transform an arm-based data table to a study-based data table</a></li>
<li class="chapter" data-level="8.4" data-path="relabel-study-names-into-a-numeric-sequence.html"><a href="relabel-study-names-into-a-numeric-sequence.html#frequentist-network-meta-analysis"><i class="fa fa-check"></i><b>8.4</b> Frequentist Network meta analysis</a></li>
<li class="chapter" data-level="8.5" data-path="relabel-study-names-into-a-numeric-sequence.html"><a href="relabel-study-names-into-a-numeric-sequence.html#arm-base-network-meta-analysis-using-pcnetmeta-package"><i class="fa fa-check"></i><b>8.5</b> Arm base Network Meta Analysis using pcnetmeta package</a></li>
<li class="chapter" data-level="8.6" data-path="relabel-study-names-into-a-numeric-sequence.html"><a href="relabel-study-names-into-a-numeric-sequence.html#references-4"><i class="fa fa-check"></i><b>8.6</b> References</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="write-many-models-with-shortest-code-using-glue-and-rlang.html"><a href="write-many-models-with-shortest-code-using-glue-and-rlang.html"><i class="fa fa-check"></i><b>9</b> Write many models with shortest code using glue and rlang</a>
<ul>
<li class="chapter" data-level="9.1" data-path="write-many-models-with-shortest-code-using-glue-and-rlang.html"><a href="write-many-models-with-shortest-code-using-glue-and-rlang.html#introduction-8"><i class="fa fa-check"></i><b>9.1</b> Introduction</a></li>
<li class="chapter" data-level="9.2" data-path="write-many-models-with-shortest-code-using-glue-and-rlang.html"><a href="write-many-models-with-shortest-code-using-glue-and-rlang.html#create-a-synthesis-data"><i class="fa fa-check"></i><b>9.2</b> Create a synthesis data</a></li>
<li class="chapter" data-level="9.3" data-path="write-many-models-with-shortest-code-using-glue-and-rlang.html"><a href="write-many-models-with-shortest-code-using-glue-and-rlang.html#first-way-using-glueglue-parse-and-eval"><i class="fa fa-check"></i><b>9.3</b> First way: using glue::glue, parse and eval</a></li>
<li class="chapter" data-level="9.4" data-path="write-many-models-with-shortest-code-using-glue-and-rlang.html"><a href="write-many-models-with-shortest-code-using-glue-and-rlang.html#second-way-using-tidy-evaluation-operator"><i class="fa fa-check"></i><b>9.4</b> Second way: using tidy evaluation operator</a></li>
<li class="chapter" data-level="9.5" data-path="write-many-models-with-shortest-code-using-glue-and-rlang.html"><a href="write-many-models-with-shortest-code-using-glue-and-rlang.html#other-tips"><i class="fa fa-check"></i><b>9.5</b> Other tips</a></li>
<li class="chapter" data-level="9.6" data-path="write-many-models-with-shortest-code-using-glue-and-rlang.html"><a href="write-many-models-with-shortest-code-using-glue-and-rlang.html#references-5"><i class="fa fa-check"></i><b>9.6</b> References</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Untitled</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="problems-when-using-dplyrfull_join" class="section level1 hasAnchor" number="4">
<h1><span class="header-section-number">Section 4</span> Problems when using dplyr::full_join<a href="problems-when-using-dplyrfull_join.html#problems-when-using-dplyrfull_join" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="problems-when-using-dplyrfull_join.html#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(powerjoin)</span>
<span id="cb2-2"><a href="problems-when-using-dplyrfull_join.html#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code></pre></div>
<pre><code>## ── Attaching packages ─────────────────────────────────────── tidyverse 1.3.1 ──</code></pre>
<pre><code>## ✔ tibble  3.1.7     ✔ dplyr   1.0.9
## ✔ tidyr   1.2.0     ✔ stringr 1.4.1
## ✔ readr   2.1.2     ✔ forcats 0.5.1
## ✔ purrr   0.3.4</code></pre>
<pre><code>## Warning: package &#39;stringr&#39; was built under R version 4.2.1</code></pre>
<pre><code>## ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
## ✖ dplyr::filter() masks stats::filter()
## ✖ dplyr::lag()    masks stats::lag()</code></pre>
<hr />
<div id="introduction-3" class="section level2 hasAnchor" number="4.1">
<h2><span class="header-section-number">4.1</span> Introduction<a href="problems-when-using-dplyrfull_join.html#introduction-3" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<blockquote>
<p>This part will explore some problems that we may cope with when using <code>dplyr::full_join</code>, and it is why <code>powerchoice::power_full_join</code> may come in handy.</p>
</blockquote>
<ul>
<li>Assume that we have two people:
<ul>
<li>name = John, age = 30, sex = “M”, treatment = NA (we don’t know John’s treatment)</li>
<li>name = Marry, age = 45, sex = “F”, treatment = “A”</li>
</ul></li>
</ul>
<p>However, we have multiple data sets that contain <strong>incomplete</strong> information about these two people.</p>
<p>Let us consider the data that we have and the problems that we might have to cope with while trying to get data that contains as much information as possible from these two people by joining our available data sets.</p>
</div>
<div id="using-dplyrfull_join" class="section level2 hasAnchor" number="4.2">
<h2><span class="header-section-number">4.2</span> Using dplyr::full_join<a href="problems-when-using-dplyrfull_join.html#using-dplyrfull_join" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ul>
<li>First, let us consider the below data set. With this data set, we will get the same result while using <code>dfs %&gt;% reduce(full_join)</code> and <code>dfs %&gt;% reduce(full_join, by= name)</code>. We do not see any problem here, and we collect all the information from our available data sets.</li>
</ul>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="problems-when-using-dplyrfull_join.html#cb7-1" aria-hidden="true" tabindex="-1"></a>dfs <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb7-2"><a href="problems-when-using-dplyrfull_join.html#cb7-2" aria-hidden="true" tabindex="-1"></a>   <span class="at">first =</span> <span class="fu">tibble</span>(<span class="at">name =</span> <span class="st">&quot;John&quot;</span>, <span class="at">age =</span> <span class="dv">30</span>),</span>
<span id="cb7-3"><a href="problems-when-using-dplyrfull_join.html#cb7-3" aria-hidden="true" tabindex="-1"></a>   <span class="at">second =</span> <span class="fu">tibble</span>(<span class="at">name =</span> <span class="fu">c</span>(<span class="st">&quot;John&quot;</span>, <span class="st">&quot;Mary&quot;</span>), <span class="at">sex =</span> <span class="fu">c</span>(<span class="st">&quot;M&quot;</span>, <span class="st">&quot;F&quot;</span>)),</span>
<span id="cb7-4"><a href="problems-when-using-dplyrfull_join.html#cb7-4" aria-hidden="true" tabindex="-1"></a>   <span class="at">third =</span> <span class="fu">tibble</span>(<span class="at">name =</span> <span class="st">&quot;Mary&quot;</span>, <span class="at">treatment =</span> <span class="st">&quot;A&quot;</span>)</span>
<span id="cb7-5"><a href="problems-when-using-dplyrfull_join.html#cb7-5" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb7-6"><a href="problems-when-using-dplyrfull_join.html#cb7-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-7"><a href="problems-when-using-dplyrfull_join.html#cb7-7" aria-hidden="true" tabindex="-1"></a>dfs <span class="sc">%&gt;%</span> <span class="fu">reduce</span>(full_join)</span></code></pre></div>
<pre><code>## Joining, by = &quot;name&quot;
## Joining, by = &quot;name&quot;</code></pre>
<pre><code>## # A tibble: 2 × 4
##   name    age sex   treatment
##   &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;    
## 1 John     30 M     &lt;NA&gt;     
## 2 Mary     NA F     A</code></pre>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="problems-when-using-dplyrfull_join.html#cb10-1" aria-hidden="true" tabindex="-1"></a>dfs <span class="sc">%&gt;%</span> <span class="fu">reduce</span>(full_join, <span class="at">by=</span><span class="st">&quot;name&quot;</span>)</span></code></pre></div>
<pre><code>## # A tibble: 2 × 4
##   name    age sex   treatment
##   &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;    
## 1 John     30 M     &lt;NA&gt;     
## 2 Mary     NA F     A</code></pre>
<ul>
<li>However, let us consider when our dfs list has one more row (the fourth row) with the name and age of Mary.</li>
</ul>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="problems-when-using-dplyrfull_join.html#cb12-1" aria-hidden="true" tabindex="-1"></a>dfs <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb12-2"><a href="problems-when-using-dplyrfull_join.html#cb12-2" aria-hidden="true" tabindex="-1"></a>   <span class="at">first =</span> <span class="fu">tibble</span>(<span class="at">name =</span> <span class="st">&quot;John&quot;</span>, <span class="at">age =</span> <span class="dv">30</span>),</span>
<span id="cb12-3"><a href="problems-when-using-dplyrfull_join.html#cb12-3" aria-hidden="true" tabindex="-1"></a>   <span class="at">second =</span> <span class="fu">tibble</span>(<span class="at">name =</span> <span class="fu">c</span>(<span class="st">&quot;John&quot;</span>, <span class="st">&quot;Mary&quot;</span>), <span class="at">sex =</span> <span class="fu">c</span>(<span class="st">&quot;M&quot;</span>, <span class="st">&quot;F&quot;</span>)),</span>
<span id="cb12-4"><a href="problems-when-using-dplyrfull_join.html#cb12-4" aria-hidden="true" tabindex="-1"></a>   <span class="at">third =</span> <span class="fu">tibble</span>(<span class="at">name =</span> <span class="st">&quot;Mary&quot;</span>, <span class="at">treatment =</span> <span class="st">&quot;A&quot;</span>),</span>
<span id="cb12-5"><a href="problems-when-using-dplyrfull_join.html#cb12-5" aria-hidden="true" tabindex="-1"></a>   <span class="at">fourth =</span> <span class="fu">tibble</span>(<span class="at">name =</span> <span class="st">&quot;Mary&quot;</span>, <span class="at">age =</span> <span class="dv">45</span>)</span>
<span id="cb12-6"><a href="problems-when-using-dplyrfull_join.html#cb12-6" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p>The <code>full_join</code> without identifying the key <code>by="name"</code> may think that there are two people with the same name, “Mary”.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="problems-when-using-dplyrfull_join.html#cb13-1" aria-hidden="true" tabindex="-1"></a>dfs <span class="sc">%&gt;%</span> <span class="fu">reduce</span>(full_join)</span></code></pre></div>
<pre><code>## Joining, by = &quot;name&quot;
## Joining, by = &quot;name&quot;
## Joining, by = c(&quot;name&quot;, &quot;age&quot;)</code></pre>
<pre><code>## # A tibble: 3 × 4
##   name    age sex   treatment
##   &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;    
## 1 John     30 M     &lt;NA&gt;     
## 2 Mary     NA F     A        
## 3 Mary     45 &lt;NA&gt;  &lt;NA&gt;</code></pre>
<p>The <code>full_join</code> with identifying the key <code>by="name"</code>creates extra columns when we have duplicated column names</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="problems-when-using-dplyrfull_join.html#cb16-1" aria-hidden="true" tabindex="-1"></a>dfs <span class="sc">%&gt;%</span> <span class="fu">reduce</span>(full_join, <span class="at">by =</span> <span class="st">&quot;name&quot;</span>)</span></code></pre></div>
<pre><code>## # A tibble: 2 × 5
##   name  age.x sex   treatment age.y
##   &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;     &lt;dbl&gt;
## 1 John     30 M     &lt;NA&gt;         NA
## 2 Mary     NA F     A            45</code></pre>
<p>We may think about how to delete these extra columns by doing like below code chunk. However, by doing this, we lost the information about Mary’s age (which was available in the age.y column above).</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="problems-when-using-dplyrfull_join.html#cb18-1" aria-hidden="true" tabindex="-1"></a>dfs <span class="sc">%&gt;%</span> <span class="fu">reduce</span>(full_join, <span class="at">by =</span> <span class="st">&quot;name&quot;</span>, <span class="at">suffix =</span> <span class="fu">c</span>(<span class="st">&quot;&quot;</span>, <span class="st">&quot;.y&quot;</span>)) <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">-</span><span class="fu">ends_with</span>(<span class="st">&quot;.y&quot;</span>))</span></code></pre></div>
<pre><code>## # A tibble: 2 × 4
##   name    age sex   treatment
##   &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;    
## 1 John     30 M     &lt;NA&gt;     
## 2 Mary     NA F     A</code></pre>
</div>
<div id="using-powerjoinpower_full_join" class="section level2 hasAnchor" number="4.3">
<h2><span class="header-section-number">4.3</span> Using powerjoin::power_full_join<a href="problems-when-using-dplyrfull_join.html#using-powerjoinpower_full_join" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Solve the problem using <a href="https://github.com/moodymudskipper/powerjoin">powerjoin</a>.</p>
<p>Let’s consider the dfs list with one more row. The problems we have when using <code>dplyr::full_join</code> and how <code>powerjoin::power_full_join</code> can be helpful.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="problems-when-using-dplyrfull_join.html#cb20-1" aria-hidden="true" tabindex="-1"></a>dfs <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb20-2"><a href="problems-when-using-dplyrfull_join.html#cb20-2" aria-hidden="true" tabindex="-1"></a>   <span class="at">first =</span> <span class="fu">tibble</span>(<span class="at">name =</span> <span class="st">&quot;John&quot;</span>, <span class="at">age =</span> <span class="dv">30</span>),</span>
<span id="cb20-3"><a href="problems-when-using-dplyrfull_join.html#cb20-3" aria-hidden="true" tabindex="-1"></a>   <span class="at">second =</span> <span class="fu">tibble</span>(<span class="at">name =</span> <span class="fu">c</span>(<span class="st">&quot;John&quot;</span>, <span class="st">&quot;Mary&quot;</span>), <span class="at">sex =</span> <span class="fu">c</span>(<span class="st">&quot;M&quot;</span>, <span class="st">&quot;F&quot;</span>)),</span>
<span id="cb20-4"><a href="problems-when-using-dplyrfull_join.html#cb20-4" aria-hidden="true" tabindex="-1"></a>   <span class="at">third =</span> <span class="fu">tibble</span>(<span class="at">name =</span> <span class="st">&quot;Mary&quot;</span>, <span class="at">treatment =</span> <span class="st">&quot;A&quot;</span>),</span>
<span id="cb20-5"><a href="problems-when-using-dplyrfull_join.html#cb20-5" aria-hidden="true" tabindex="-1"></a>   <span class="at">fourth =</span> <span class="fu">tibble</span>(<span class="at">name =</span> <span class="st">&quot;Mary&quot;</span>, <span class="at">age =</span> <span class="dv">45</span>), </span>
<span id="cb20-6"><a href="problems-when-using-dplyrfull_join.html#cb20-6" aria-hidden="true" tabindex="-1"></a>   <span class="at">fifth =</span> <span class="fu">tibble</span>(<span class="at">name =</span> <span class="st">&quot;Mary&quot;</span>, <span class="at">sex =</span> <span class="st">&quot;F&quot;</span>)</span>
<span id="cb20-7"><a href="problems-when-using-dplyrfull_join.html#cb20-7" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="problems-when-using-dplyrfull_join.html#cb21-1" aria-hidden="true" tabindex="-1"></a>dfs <span class="sc">%&gt;%</span> <span class="fu">reduce</span>(full_join)</span></code></pre></div>
<pre><code>## Joining, by = &quot;name&quot;
## Joining, by = &quot;name&quot;
## Joining, by = c(&quot;name&quot;, &quot;age&quot;)
## Joining, by = c(&quot;name&quot;, &quot;sex&quot;)</code></pre>
<pre><code>## # A tibble: 3 × 4
##   name    age sex   treatment
##   &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;    
## 1 John     30 M     &lt;NA&gt;     
## 2 Mary     NA F     A        
## 3 Mary     45 &lt;NA&gt;  &lt;NA&gt;</code></pre>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="problems-when-using-dplyrfull_join.html#cb24-1" aria-hidden="true" tabindex="-1"></a>dfs <span class="sc">%&gt;%</span> <span class="fu">reduce</span>(full_join, <span class="at">by =</span> <span class="st">&quot;name&quot;</span>)</span></code></pre></div>
<pre><code>## # A tibble: 2 × 6
##   name  age.x sex.x treatment age.y sex.y
##   &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;     &lt;dbl&gt; &lt;chr&gt;
## 1 John     30 M     &lt;NA&gt;         NA &lt;NA&gt; 
## 2 Mary     NA F     A            45 F</code></pre>
<p>The <a href="https://github.com/moodymudskipper/powerjoin">powerjoin</a> package helps us collect all available information.</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="problems-when-using-dplyrfull_join.html#cb26-1" aria-hidden="true" tabindex="-1"></a>dfs <span class="sc">%&gt;%</span> <span class="fu">power_full_join</span>(<span class="at">by=</span> <span class="st">&quot;name&quot;</span>, <span class="at">conflict =</span> coalesce_xy)</span></code></pre></div>
<pre><code>## # A tibble: 2 × 4
##   name  treatment   age sex  
##   &lt;chr&gt; &lt;chr&gt;     &lt;dbl&gt; &lt;chr&gt;
## 1 John  &lt;NA&gt;         30 M    
## 2 Mary  A            45 F</code></pre>
</div>
<div id="what-if-we-have-conflict-data-sets" class="section level2 hasAnchor" number="4.4">
<h2><span class="header-section-number">4.4</span> What if we have conflict data sets<a href="problems-when-using-dplyrfull_join.html#what-if-we-have-conflict-data-sets" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Now, consider that we have two data sets for Mary that have different values for “age” (the fourth and fifth), with ages equal to 45 and 65, respectively.</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="problems-when-using-dplyrfull_join.html#cb28-1" aria-hidden="true" tabindex="-1"></a>dfs <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb28-2"><a href="problems-when-using-dplyrfull_join.html#cb28-2" aria-hidden="true" tabindex="-1"></a>   <span class="at">first =</span> <span class="fu">tibble</span>(<span class="at">name =</span> <span class="st">&quot;John&quot;</span>, <span class="at">age =</span> <span class="dv">30</span>),</span>
<span id="cb28-3"><a href="problems-when-using-dplyrfull_join.html#cb28-3" aria-hidden="true" tabindex="-1"></a>   <span class="at">second =</span> <span class="fu">tibble</span>(<span class="at">name =</span> <span class="fu">c</span>(<span class="st">&quot;John&quot;</span>, <span class="st">&quot;Mary&quot;</span>), <span class="at">sex =</span> <span class="fu">c</span>(<span class="st">&quot;M&quot;</span>, <span class="st">&quot;F&quot;</span>)),</span>
<span id="cb28-4"><a href="problems-when-using-dplyrfull_join.html#cb28-4" aria-hidden="true" tabindex="-1"></a>   <span class="at">third =</span> <span class="fu">tibble</span>(<span class="at">name =</span> <span class="st">&quot;Mary&quot;</span>, <span class="at">treatment =</span> <span class="st">&quot;A&quot;</span>),</span>
<span id="cb28-5"><a href="problems-when-using-dplyrfull_join.html#cb28-5" aria-hidden="true" tabindex="-1"></a>   <span class="at">fourth =</span> <span class="fu">tibble</span>(<span class="at">name =</span> <span class="st">&quot;Mary&quot;</span>, <span class="at">age =</span> <span class="dv">45</span>), </span>
<span id="cb28-6"><a href="problems-when-using-dplyrfull_join.html#cb28-6" aria-hidden="true" tabindex="-1"></a>   <span class="at">fifth =</span> <span class="fu">tibble</span>(<span class="at">name =</span> <span class="st">&quot;Mary&quot;</span>, <span class="at">age =</span> <span class="dv">65</span>)</span>
<span id="cb28-7"><a href="problems-when-using-dplyrfull_join.html#cb28-7" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p>Then the argument <code>conflict = coalesce_xy</code> will take the first available value (age = 45), while <code>conflict = coalesce_yx</code> will take the second available value (age = 65).</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="problems-when-using-dplyrfull_join.html#cb29-1" aria-hidden="true" tabindex="-1"></a>dfs <span class="sc">%&gt;%</span> <span class="fu">power_full_join</span>(<span class="at">by=</span> <span class="st">&quot;name&quot;</span>, <span class="at">conflict =</span> coalesce_xy)</span></code></pre></div>
<pre><code>## # A tibble: 2 × 4
##   name  sex   treatment   age
##   &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;     &lt;dbl&gt;
## 1 John  M     &lt;NA&gt;         30
## 2 Mary  F     A            45</code></pre>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="problems-when-using-dplyrfull_join.html#cb31-1" aria-hidden="true" tabindex="-1"></a>dfs <span class="sc">%&gt;%</span> <span class="fu">power_full_join</span>(<span class="at">by=</span> <span class="st">&quot;name&quot;</span>, <span class="at">conflict =</span> coalesce_yx)</span></code></pre></div>
<pre><code>## # A tibble: 2 × 4
##   name  sex   treatment   age
##   &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;     &lt;dbl&gt;
## 1 John  M     &lt;NA&gt;         30
## 2 Mary  F     A            65</code></pre>
</div>
<div id="references-1" class="section level2 hasAnchor" number="4.5">
<h2><span class="header-section-number">4.5</span> References<a href="problems-when-using-dplyrfull_join.html#references-1" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><a href="https://github.com/moodymudskipper/powerjoin">https://github.com/moodymudskipper/powerjoin</a></p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="r-resources-from-absolute-beginners-to-more-advance.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="load-and-write-to-an-excel-sheet.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/USERNAME/REPO/edit/BRANCH/03-fulljoin.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["_main.pdf", "_main.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
