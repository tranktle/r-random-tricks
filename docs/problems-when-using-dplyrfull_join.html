<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Section 4 Problems when using dplyr::full_join | Tran Le _ Random R tricks</title>
<meta name="author" content="Tran Le">
<meta name="description" content="library(powerjoin) library(tidyverse) ## ── Attaching packages ─────────────────────────────────────── tidyverse 1.3.1 ── ## ✔ tibble 3.1.7   ✔ dplyr  1.0.9 ## ✔ tidyr  1.2.0   ✔ stringr 1.4.1 ##...">
<meta name="generator" content="bookdown 0.30 with bs4_book()">
<meta property="og:title" content="Section 4 Problems when using dplyr::full_join | Tran Le _ Random R tricks">
<meta property="og:type" content="book">
<meta property="og:description" content="library(powerjoin) library(tidyverse) ## ── Attaching packages ─────────────────────────────────────── tidyverse 1.3.1 ── ## ✔ tibble 3.1.7   ✔ dplyr  1.0.9 ## ✔ tidyr  1.2.0   ✔ stringr 1.4.1 ##...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Section 4 Problems when using dplyr::full_join | Tran Le _ Random R tricks">
<meta name="twitter:description" content="library(powerjoin) library(tidyverse) ## ── Attaching packages ─────────────────────────────────────── tidyverse 1.3.1 ── ## ✔ tibble 3.1.7   ✔ dplyr  1.0.9 ## ✔ tidyr  1.2.0   ✔ stringr 1.4.1 ##...">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.3.1/transition.js"></script><script src="libs/bs3compat-0.3.1/tabs.js"></script><script src="libs/bs3compat-0.3.1/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
<link rel="stylesheet" href="style.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Tran Le _ Random R tricks</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html"><span class="header-section-number">1</span> Introduction</a></li>
<li><a class="" href="github-cheatsheet.html"><span class="header-section-number">2</span> Github-Cheatsheet</a></li>
<li><a class="" href="r-resources-from-absolute-beginners-to-more-advance.html"><span class="header-section-number">3</span> R resources from absolute beginners to more advance</a></li>
<li><a class="active" href="problems-when-using-dplyrfull_join.html"><span class="header-section-number">4</span> Problems when using dplyr::full_join</a></li>
<li><a class="" href="load-and-write-to-an-excel-sheet.html"><span class="header-section-number">5</span> Load and write to an excel sheet</a></li>
<li><a class="" href="replace-values-by-nasa-specfic-value.html"><span class="header-section-number">6</span> Replace Values by Nas/A specfic value</a></li>
<li><a class="" href="find-group-of-highly-correlated-columns.html"><span class="header-section-number">7</span> Find group of highly correlated columns</a></li>
<li><a class="" href="relabel-study-names-into-a-numeric-sequence.html"><span class="header-section-number">8</span> Relabel study names into a numeric sequence</a></li>
<li><a class="" href="arm-base-network-meta-analysis-using-pcnetmeta-package.html"><span class="header-section-number">9</span> Arm base Network Meta Analysis using pcnetmeta package</a></li>
<li><a class="" href="write-many-models-with-shortest-code-using-glue-and-rlang.html"><span class="header-section-number">10</span> Write many models with shortest code using glue and rlang</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/tranktle/r-random-tricks">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="problems-when-using-dplyrfull_join" class="section level1" number="4">
<h1>
<span class="header-section-number">Section 4</span> Problems when using dplyr::full_join<a class="anchor" aria-label="anchor" href="#problems-when-using-dplyrfull_join"><i class="fas fa-link"></i></a>
</h1>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/moodymudskipper/powerjoin">powerjoin</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org">tidyverse</a></span><span class="op">)</span></span></code></pre></div>
<pre><code>## ── Attaching packages ─────────────────────────────────────── tidyverse 1.3.1 ──</code></pre>
<pre><code>## ✔ tibble  3.1.7     ✔ dplyr   1.0.9
## ✔ tidyr   1.2.0     ✔ stringr 1.4.1
## ✔ readr   2.1.2     ✔ forcats 0.5.1
## ✔ purrr   0.3.4</code></pre>
<pre><code>## Warning: package 'stringr' was built under R version 4.2.1</code></pre>
<pre><code>## ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
## ✖ dplyr::filter() masks stats::filter()
## ✖ dplyr::lag()    masks stats::lag()</code></pre>
<hr>
<div id="introduction-3" class="section level2" number="4.1">
<h2>
<span class="header-section-number">4.1</span> Introduction<a class="anchor" aria-label="anchor" href="#introduction-3"><i class="fas fa-link"></i></a>
</h2>
<blockquote>
<p>This part will explore some problems that we may cope with when using <code><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">dplyr::full_join</a></code>, and it is why <code>powerchoice::power_full_join</code> may come in handy.</p>
</blockquote>
<ul>
<li>Assume that we have two people:
<ul>
<li>name = John, age = 30, sex = “M”, treatment = NA (we don’t know John’s treatment)</li>
<li>name = Marry, age = 45, sex = “F”, treatment = “A”</li>
</ul>
</li>
</ul>
<p>However, we have multiple data sets that contain <strong>incomplete</strong> information about these two people.</p>
<p>Let us consider the data that we have and the problems that we might have to cope with while trying to get data that contains as much information as possible from these two people by joining our available data sets.</p>
</div>
<div id="using-dplyrfull_join" class="section level2" number="4.2">
<h2>
<span class="header-section-number">4.2</span> Using dplyr::full_join<a class="anchor" aria-label="anchor" href="#using-dplyrfull_join"><i class="fas fa-link"></i></a>
</h2>
<ul>
<li>First, let us consider the below data set. With this data set, we will get the same result while using <code>dfs %&gt;% reduce(full_join)</code> and <code>dfs %&gt;% reduce(full_join, by= name)</code>. We do not see any problem here, and we collect all the information from our available data sets.</li>
</ul>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dfs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span></span>
<span>   first <span class="op">=</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op">(</span>name <span class="op">=</span> <span class="st">"John"</span>, age <span class="op">=</span> <span class="fl">30</span><span class="op">)</span>,</span>
<span>   second <span class="op">=</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op">(</span>name <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"John"</span>, <span class="st">"Mary"</span><span class="op">)</span>, sex <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"M"</span>, <span class="st">"F"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>   third <span class="op">=</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op">(</span>name <span class="op">=</span> <span class="st">"Mary"</span>, treatment <span class="op">=</span> <span class="st">"A"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">dfs</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://purrr.tidyverse.org/reference/reduce.html">reduce</a></span><span class="op">(</span><span class="va">full_join</span><span class="op">)</span></span></code></pre></div>
<pre><code>## Joining, by = "name"
## Joining, by = "name"</code></pre>
<pre><code>## # A tibble: 2 × 4
##   name    age sex   treatment
##   &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;    
## 1 John     30 M     &lt;NA&gt;     
## 2 Mary     NA F     A</code></pre>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dfs</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://purrr.tidyverse.org/reference/reduce.html">reduce</a></span><span class="op">(</span><span class="va">full_join</span>, by<span class="op">=</span><span class="st">"name"</span><span class="op">)</span></span></code></pre></div>
<pre><code>## # A tibble: 2 × 4
##   name    age sex   treatment
##   &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;    
## 1 John     30 M     &lt;NA&gt;     
## 2 Mary     NA F     A</code></pre>
<ul>
<li>However, let us consider when our dfs list has one more row (the fourth row) with the name and age of Mary.</li>
</ul>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dfs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span></span>
<span>   first <span class="op">=</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op">(</span>name <span class="op">=</span> <span class="st">"John"</span>, age <span class="op">=</span> <span class="fl">30</span><span class="op">)</span>,</span>
<span>   second <span class="op">=</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op">(</span>name <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"John"</span>, <span class="st">"Mary"</span><span class="op">)</span>, sex <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"M"</span>, <span class="st">"F"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>   third <span class="op">=</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op">(</span>name <span class="op">=</span> <span class="st">"Mary"</span>, treatment <span class="op">=</span> <span class="st">"A"</span><span class="op">)</span>,</span>
<span>   fourth <span class="op">=</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op">(</span>name <span class="op">=</span> <span class="st">"Mary"</span>, age <span class="op">=</span> <span class="fl">45</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>The <code>full_join</code> without identifying the key <code>by="name"</code> may think that there are two people with the same name, “Mary”.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dfs</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://purrr.tidyverse.org/reference/reduce.html">reduce</a></span><span class="op">(</span><span class="va">full_join</span><span class="op">)</span></span></code></pre></div>
<pre><code>## Joining, by = "name"
## Joining, by = "name"
## Joining, by = c("name", "age")</code></pre>
<pre><code>## # A tibble: 3 × 4
##   name    age sex   treatment
##   &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;    
## 1 John     30 M     &lt;NA&gt;     
## 2 Mary     NA F     A        
## 3 Mary     45 &lt;NA&gt;  &lt;NA&gt;</code></pre>
<p>The <code>full_join</code> with identifying the key <code>by="name"</code>creates extra columns when we have duplicated column names</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dfs</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://purrr.tidyverse.org/reference/reduce.html">reduce</a></span><span class="op">(</span><span class="va">full_join</span>, by <span class="op">=</span> <span class="st">"name"</span><span class="op">)</span></span></code></pre></div>
<pre><code>## # A tibble: 2 × 5
##   name  age.x sex   treatment age.y
##   &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;     &lt;dbl&gt;
## 1 John     30 M     &lt;NA&gt;         NA
## 2 Mary     NA F     A            45</code></pre>
<p>We may think about how to delete these extra columns by doing like below code chunk. However, by doing this, we lost the information about Mary’s age (which was available in the age.y column above).</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dfs</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://purrr.tidyverse.org/reference/reduce.html">reduce</a></span><span class="op">(</span><span class="va">full_join</span>, by <span class="op">=</span> <span class="st">"name"</span>, suffix <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">""</span>, <span class="st">".y"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="op">-</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html">ends_with</a></span><span class="op">(</span><span class="st">".y"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code>## # A tibble: 2 × 4
##   name    age sex   treatment
##   &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;    
## 1 John     30 M     &lt;NA&gt;     
## 2 Mary     NA F     A</code></pre>
</div>
<div id="using-powerjoinpower_full_join" class="section level2" number="4.3">
<h2>
<span class="header-section-number">4.3</span> Using powerjoin::power_full_join<a class="anchor" aria-label="anchor" href="#using-powerjoinpower_full_join"><i class="fas fa-link"></i></a>
</h2>
<p>Solve the problem using <a href="https://github.com/moodymudskipper/powerjoin">powerjoin</a>.</p>
<p>Let’s consider the dfs list with one more row. The problems we have when using <code><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">dplyr::full_join</a></code> and how <code><a href="https://rdrr.io/pkg/powerjoin/man/power_left_join.html">powerjoin::power_full_join</a></code> can be helpful.</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dfs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span></span>
<span>   first <span class="op">=</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op">(</span>name <span class="op">=</span> <span class="st">"John"</span>, age <span class="op">=</span> <span class="fl">30</span><span class="op">)</span>,</span>
<span>   second <span class="op">=</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op">(</span>name <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"John"</span>, <span class="st">"Mary"</span><span class="op">)</span>, sex <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"M"</span>, <span class="st">"F"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>   third <span class="op">=</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op">(</span>name <span class="op">=</span> <span class="st">"Mary"</span>, treatment <span class="op">=</span> <span class="st">"A"</span><span class="op">)</span>,</span>
<span>   fourth <span class="op">=</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op">(</span>name <span class="op">=</span> <span class="st">"Mary"</span>, age <span class="op">=</span> <span class="fl">45</span><span class="op">)</span>, </span>
<span>   fifth <span class="op">=</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op">(</span>name <span class="op">=</span> <span class="st">"Mary"</span>, sex <span class="op">=</span> <span class="st">"F"</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dfs</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://purrr.tidyverse.org/reference/reduce.html">reduce</a></span><span class="op">(</span><span class="va">full_join</span><span class="op">)</span></span></code></pre></div>
<pre><code>## Joining, by = "name"
## Joining, by = "name"
## Joining, by = c("name", "age")
## Joining, by = c("name", "sex")</code></pre>
<pre><code>## # A tibble: 3 × 4
##   name    age sex   treatment
##   &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;    
## 1 John     30 M     &lt;NA&gt;     
## 2 Mary     NA F     A        
## 3 Mary     45 &lt;NA&gt;  &lt;NA&gt;</code></pre>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dfs</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://purrr.tidyverse.org/reference/reduce.html">reduce</a></span><span class="op">(</span><span class="va">full_join</span>, by <span class="op">=</span> <span class="st">"name"</span><span class="op">)</span></span></code></pre></div>
<pre><code>## # A tibble: 2 × 6
##   name  age.x sex.x treatment age.y sex.y
##   &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;     &lt;dbl&gt; &lt;chr&gt;
## 1 John     30 M     &lt;NA&gt;         NA &lt;NA&gt; 
## 2 Mary     NA F     A            45 F</code></pre>
<p>The <a href="https://github.com/moodymudskipper/powerjoin">powerjoin</a> package helps us collect all available information.</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dfs</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/pkg/powerjoin/man/power_left_join.html">power_full_join</a></span><span class="op">(</span>by<span class="op">=</span> <span class="st">"name"</span>, conflict <span class="op">=</span> <span class="va">coalesce_xy</span><span class="op">)</span></span></code></pre></div>
<pre><code>## # A tibble: 2 × 4
##   name  treatment   age sex  
##   &lt;chr&gt; &lt;chr&gt;     &lt;dbl&gt; &lt;chr&gt;
## 1 John  &lt;NA&gt;         30 M    
## 2 Mary  A            45 F</code></pre>
</div>
<div id="what-if-we-have-conflict-data-sets" class="section level2" number="4.4">
<h2>
<span class="header-section-number">4.4</span> What if we have conflict data sets<a class="anchor" aria-label="anchor" href="#what-if-we-have-conflict-data-sets"><i class="fas fa-link"></i></a>
</h2>
<p>Now, consider that we have two data sets for Mary that have different values for “age” (the fourth and fifth), with ages equal to 45 and 65, respectively.</p>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dfs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span></span>
<span>   first <span class="op">=</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op">(</span>name <span class="op">=</span> <span class="st">"John"</span>, age <span class="op">=</span> <span class="fl">30</span><span class="op">)</span>,</span>
<span>   second <span class="op">=</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op">(</span>name <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"John"</span>, <span class="st">"Mary"</span><span class="op">)</span>, sex <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"M"</span>, <span class="st">"F"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>   third <span class="op">=</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op">(</span>name <span class="op">=</span> <span class="st">"Mary"</span>, treatment <span class="op">=</span> <span class="st">"A"</span><span class="op">)</span>,</span>
<span>   fourth <span class="op">=</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op">(</span>name <span class="op">=</span> <span class="st">"Mary"</span>, age <span class="op">=</span> <span class="fl">45</span><span class="op">)</span>, </span>
<span>   fifth <span class="op">=</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op">(</span>name <span class="op">=</span> <span class="st">"Mary"</span>, age <span class="op">=</span> <span class="fl">65</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Then the argument <code>conflict = coalesce_xy</code> will take the first available value (age = 45), while <code>conflict = coalesce_yx</code> will take the second available value (age = 65).</p>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dfs</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/pkg/powerjoin/man/power_left_join.html">power_full_join</a></span><span class="op">(</span>by<span class="op">=</span> <span class="st">"name"</span>, conflict <span class="op">=</span> <span class="va">coalesce_xy</span><span class="op">)</span></span></code></pre></div>
<pre><code>## # A tibble: 2 × 4
##   name  sex   treatment   age
##   &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;     &lt;dbl&gt;
## 1 John  M     &lt;NA&gt;         30
## 2 Mary  F     A            45</code></pre>
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dfs</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/pkg/powerjoin/man/power_left_join.html">power_full_join</a></span><span class="op">(</span>by<span class="op">=</span> <span class="st">"name"</span>, conflict <span class="op">=</span> <span class="va">coalesce_yx</span><span class="op">)</span></span></code></pre></div>
<pre><code>## # A tibble: 2 × 4
##   name  sex   treatment   age
##   &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;     &lt;dbl&gt;
## 1 John  M     &lt;NA&gt;         30
## 2 Mary  F     A            65</code></pre>
</div>
<div id="references-1" class="section level2" number="4.5">
<h2>
<span class="header-section-number">4.5</span> References<a class="anchor" aria-label="anchor" href="#references-1"><i class="fas fa-link"></i></a>
</h2>
<p><a href="https://github.com/moodymudskipper/powerjoin">https://github.com/moodymudskipper/powerjoin</a></p>

</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="r-resources-from-absolute-beginners-to-more-advance.html"><span class="header-section-number">3</span> R resources from absolute beginners to more advance</a></div>
<div class="next"><a href="load-and-write-to-an-excel-sheet.html"><span class="header-section-number">5</span> Load and write to an excel sheet</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#problems-when-using-dplyrfull_join"><span class="header-section-number">4</span> Problems when using dplyr::full_join</a></li>
<li><a class="nav-link" href="#introduction-3"><span class="header-section-number">4.1</span> Introduction</a></li>
<li><a class="nav-link" href="#using-dplyrfull_join"><span class="header-section-number">4.2</span> Using dplyr::full_join</a></li>
<li><a class="nav-link" href="#using-powerjoinpower_full_join"><span class="header-section-number">4.3</span> Using powerjoin::power_full_join</a></li>
<li><a class="nav-link" href="#what-if-we-have-conflict-data-sets"><span class="header-section-number">4.4</span> What if we have conflict data sets</a></li>
<li><a class="nav-link" href="#references-1"><span class="header-section-number">4.5</span> References</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/tranktle/r-random-tricks/blob/master/03-fulljoin.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/tranktle/r-random-tricks/edit/master/03-fulljoin.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Tran Le _ Random R tricks</strong>" was written by Tran Le. It was last built on 04-01-2022 Updated:2022-12-07.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
